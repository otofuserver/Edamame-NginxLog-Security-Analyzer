# url_suppression.js

対象: `src/main/resources/static/url_suppression.js`

## 概要
- URL抑止管理ビューのフロントエンドロジック。検索・フィルタ・ページング・モーダル CRUD・ミニメニューを制御する。

## 主な機能
- サーバー一覧取得とセレクト初期化（フィルタ用/モーダル用）。
- 抑止ルールの検索（キーワード・サーバーフィルタ・ソート・ページング）とテーブル描画。
- ミニメニューによる有効/無効切替・編集モーダル起動・削除。
- 新規作成/編集モーダルの入力管理と保存/削除リクエスト送信。
- ページャ描画（��大20件/ページ）。

## 挙動
- 初期化時にミニメニュー生成・ボタン再配置（右寄せ）・イベントバインド・サーバー取得・検索を実行。
- 検索入力とサーバーフィルタ変更は200msデバウンスで自動検索し、常に1ページ目から再検索。
- 並び替えクリックでソートキー/昇降順をトグルし、クライアント側で表示順を更新。
- 行クリックで `mini_menu.js` を用いたメニューを表示（閉じる項目なし）。
- 無効行は `inactive` クラス付与でグレー表示。

## 細かい指定された仕様
- APIパラメータ: `q, server, sort, order, page, size` を付与し、`size` デフォルト20。
- API応答の `total/totalPages/page/size/canEdit` をSTATEに保持しページャで表示。
- サーバーフィルタは「すべて」+有効サーバー、モーダルは「すべて」+有効サーバーで `all` は非表示。
- 日時は日本ロケールで `YYYY/MM/DD HH:mm:ss` 表示。正規表現・テーブルセルは改行禁止で省略表示。
- 検索/保存/削除は認証済み同一オリジンの fetch を利用。

## その他
- ミニメニューのスタイル・位置計算は `mini_menu.js`、カード外観は `style.css` でURL脅威度と統一。

## 変更履歴
- 2026-01-20: ページング・改行禁止・ミニメニュー統一・検索デバウンス対応を含む仕様書を新規作成。
