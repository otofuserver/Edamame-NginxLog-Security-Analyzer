/* Edamame Security Analyzer - Dashboard Styles (static/style.css)
   ユーザー管理のテーブルとモーダルを含む基本スタイル
*/

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #f5f7fa;
  color: #333;
  margin: 0;
  line-height: 1.6;
}

.dashboard-container { min-height: 100vh; display:flex; flex-direction:column; }
.app-body { display:flex; gap:1rem; padding:1.5rem; }
.sidebar { width:240px; min-width:240px; max-width:240px; flex:0 0 240px; background:#fff; border-radius:8px; padding:1rem; box-shadow:0 2px 8px rgba(0,0,0,0.06); height:calc(100vh - 120px); overflow:auto; }
.sidebar .nav-link { display:block; padding:0.5rem 0.75rem; color:#333; text-decoration:none; border-radius:6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sidebar .nav-link:hover, .sidebar .nav-link.active { background:linear-gradient(90deg,#eef2ff,#f5f7ff); color:#222; }

/* サイドバー内のユーザー表示調整 */
.sidebar .sidebar-user-footer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.sidebar .user-avatar {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.avatar-circle {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
  font-size: 0.95rem;
}

.sidebar .user-name {
  font-weight: 600;
  font-size: 0.95rem;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#main-content.right-content { flex:1 1 auto; padding:1rem; min-height:calc(100vh - 120px); }
.card { background:white; border-radius:10px; padding:1.5rem; box-shadow:0 2px 10px rgba(0,0,0,0.1); }

/* テーブル */
table.table { width:100%; border-collapse:collapse; margin-top:.5rem; table-layout:fixed; }
table.table th, table.table td { padding:.6rem .75rem; border-bottom:1px solid #e6e9ef; text-align:left; vertical-align:middle; }
table.table thead th { background:#f8fafc; font-weight:600; cursor:pointer; user-select:none; }
table.table thead th.sorted-asc::after { content:' ▲'; font-size:0.8em; color:#666; }
table.table thead th.sorted-desc::after { content:' ▼'; font-size:0.8em; color:#666; }
tr:hover { background: #fafcff; }

/* ページネーション */
#pagination { margin-top: .75rem; display:flex; align-items:center; gap:.5rem; }
#pagination button { padding: .35rem .6rem; border-radius:6px; border:1px solid #d7dbe2; background:white; cursor:pointer; }
#pagination button:disabled { opacity: .5; cursor: not-allowed; }

/* モーダル */
.modal { position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; z-index:1200; }
.modal[aria-hidden='true'] { display:none; }
.modal-backdrop { position:absolute; inset:0; background:rgba(0,0,0,0.45); }
.modal-content { position:relative; background:#fff; border-radius:10px; padding:1rem; width:480px; max-width:calc(100% - 2rem); box-shadow:0 10px 30px rgba(0,0,0,0.2); z-index:2; }
.modal-header { margin-bottom:.5rem; }
.modal-body { margin-bottom:.75rem; }
.modal-footer { display:flex; gap:.5rem; justify-content:flex-end; }

/* モーダル内の読み取り値表示 */
.form-value {
  padding: .45rem .5rem;
  border: 1px solid #d7dbe2;
  border-radius: 6px;
  background: #f8f9fc;
  min-height: 34px;
  display: flex;
  align-items: center;
}

/* 複数行のラベル整列改善 */
.modal .form-row { gap: .25rem; }
.modal .form-row { margin-bottom:.5rem; display:flex; flex-direction:column; }
.modal .form-row label { font-size:.85rem; margin-bottom:.25rem; }
.modal .form-row input[type='text'], .modal .form-row input[type='email'], .modal .form-row input[type='password'] { padding:.45rem .5rem; border:1px solid #d7dbe2; border-radius:6px; width:100%; }

/* チェックボックス行を横並びにして左寄せする（.form-row はデフォルトで column なので上書き） */
.modal .form-row.checkbox { flex-direction: row; align-items: center; }
.modal .form-row.checkbox label { margin: 0 0 0 0.25rem; }
.modal .form-row.checkbox input[type='checkbox'] { margin: 0; }

/* 横並びで左寄せしたい行用 (例: プロフィールのメール行) */
.modal .form-row.row-inline { display:flex; flex-direction:row; align-items:center; gap:.5rem; justify-content:flex-start; width:100%; }
.modal .form-row.row-inline label { margin:0; width:5rem; text-align:left; }
.modal .form-row.row-inline .row-inner { flex:1; display:flex; gap:.5rem; align-items:center; min-width:0; }
.modal .form-row.row-inline .row-inner input[type='email'],
.modal .form-row.row-inline .row-inner input[type='text'] { flex:1; min-width:0; width:auto; }

/* 強制的に左寄せしたい場合のフォールバックルール */
.modal .form-row.row-inline { margin-left:0 !important; padding-left:0 !important; justify-content:flex-start !important; }
.modal .form-row.row-inline label { margin-left:0 !important; }
.modal .form-row.row-inline .row-inner { justify-content:flex-start !important; }
.modal-content { padding-left:1rem !important; padding-right:1rem !important; }

/* Override: row-inline 内の input が全幅 rule に上書きされるケースを防ぐ */
.modal .form-row.row-inline .row-inner input[type='email'],
.modal .form-row.row-inline .row-inner input[type='text'] {
  width: auto !important; /* ensure it does not force full width */
  flex: 1 1 auto !important;
}
.modal .form-row.row-inline .row-inner button {
  flex: 0 0 auto !important;
  white-space: nowrap;
}

/* 警告ボタン */
.modal .danger { background:#ff6b6b; color:white; border:none; padding:.45rem .75rem; border-radius:6px; cursor:pointer; }
.modal button { padding:.45rem .75rem; border-radius:6px; border:1px solid #d7dbe2; cursor:pointer; background:white; }

/* small helpers */
.hidden { display:none !important; }

/* Sidebar mini menu */
.sidebar-mini-menu {
  min-width: 180px;
}
.sidebar-mini-menu .mini-menu-card {
  background: white; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.12); padding:.5rem; display:flex; flex-direction:column; gap:.25rem;
}
.sidebar-mini-menu .mini-menu-item { background:transparent; border:none; text-align:left; padding:.5rem; cursor:pointer; border-radius:6px; }
.sidebar-mini-menu .mini-menu-item:hover { background: #f0f4ff; }

/* ミニメニューの表示位置: ユーザー表示のすぐ近くに出す */
.sidebar .sidebar-user-footer { position: relative; }
.sidebar-mini-menu { position: absolute; right: 8px; bottom: 48px; z-index: 1500; display: none; }
.sidebar-mini-menu.show { display: block; }

/* profile modal tweaks */
.modal .form-row input[type='text'], .modal .form-row input[type='email'], .modal .form-row input[type='password'] { width:100%; }
.modal .modal-footer { justify-content:flex-end; }

/* 画面レスポンシブ */
@media (max-width:800px) {
  .sidebar { display:none; }
  .app-body { padding: .75rem; }
  .modal-content { width: 92%; }
}

/* サイドメニューは常にフルサイズ表示 */
.sidebar { display:block !important; }

/* 強制オーバーライド: row-inline の入力とボタンを横並びに固定する（最後に追加） */
.modal-content .form-row.row-inline { display:flex !important; align-items:center !important; gap:.5rem !important; }
.modal-content .form-row.row-inline label { width:5rem !important; }
.modal-content .form-row.row-inline .row-inner { display:flex !important; align-items:center !important; gap:.5rem !important; min-width:0 !important; }
.modal-content .form-row.row-inline .row-inner input[type='email'],
.modal-content .form-row.row-inline .row-inner input[type='text'] {
  width: auto !important;
  flex: 1 1 auto !important;
  min-width: 0 !important;
}
.modal-content .form-row.row-inline .row-inner button {
  flex: 0 0 auto !important;
  white-space: nowrap !important;
}

/* 検索フォームをフル幅に伸ばす */
.search-form { display:flex; width:100%; margin-bottom:.75rem; }
.search-form input[type='text'] { flex:1 1 auto; width:100%; max-width:100%; }
